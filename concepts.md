> 하나의 서버에는 기본적으로 어떤 운영체제든 Host OS(내 컴퓨터에 직접 설치된 운영체제)가 올라감
> 

## VM (Virtual Machine)

- **구조**: 물리 서버 위에 **하이퍼바이저**(VMware, VirtualBox 같은 가상화 소프트웨어)를 두고, 그 위에 여러 개의 OS(게스트 OS)를 돌리는 방식
    - 하이퍼바이저란?
        - 가상화 관리자 (물리서버와 Hypervisor는 1:1 관계)
        - 물리적 하드웨어(CPU, 메모리, 저장소)를 여러 VM에게 나눠줌
        - 각 VM이 독립적으로 돌아가도록 관리
- **특징**
    - 각각의 VM이 **자체 OS**를 갖고 있음.
    - **무겁고, 부팅이 느림.**
    - 보안·격리 수준이 높음 (서로 완전히 분리된 독립된 컴퓨터처럼 동작).
    - 내가 윈도우를 사용하고 있더라도, 새로운 Guse OS 설치할때 Linux를 설치해서 쓸 수 있음 (예시)
- Host OS 없이도 쓰는 경우 있음
    - 어차피 가상화 해서 Guest OS들 쓸건데, Host OS 있어봤자
- 클라우드(EC2 등) 쓰면 Container보다 별도로 해야되는건 없음

## Container

> 애플리케이션을 실행하기 위해 필요한 모든 것(코드 + 라이브러리 + 설정)을 묶어서, 격리된 환경에서 실행시키는 기술
> 
- 호스트 OS의 커널을 공유하며 자원을 격리
- **구조**: 호스트 OS 위에 **컨테이너 엔진(Docker 같은 것)**을 두고, 애플리케이션과 필요한 라이브러리만 분리해서 실행.
- **특징**
    - OS 커널을 공유 → **가볍고 빠름**.
    - 실행과 종료가 빠르다 (초 단위).
    - 자원 효율이 좋음 (더 많은 컨테이너를 같은 서버에 돌릴 수 있음).
    - VM보다 격리가 약간 덜하지만, 운영환경에서 충분히 안전하게 사용 가능.
    - 한 컨테이너가 보안에 뚫려 OS영역에 접근하게 되면 다른 컨테이너가 위험해질 수도 있긴함 (보완은 가능)
    - 내가 윈도우를 사용하고 있다면,  Linux를 설치해서 쓸 수 없음 (예시)
- 클라우드(ECS/EKS) 써도 Docker 이미지를 만들거나, Kubernetes를 설정해주는 작업이 별도로 필요
- **쿠버네티스 환경에서 호스트 OS = Pod가 할당된 노드의 운영체제**
- 도커의 역할은 컨테이너 생성과 실행까지


**Kubernetes Cluster**

- Master와 Node들 (그래서 최소 2대 이상이 있어야 ‘정식 클러스터’)

 **Master (Control Plane Node)  - 관리 서버**

- 서버 1대
- 쿠버네티스의 전반적인 기능들을 컨트롤하는 역할
    - 스케줄러도 여기에 들어감
- 직접 애플리케이션을 실행하지 않고, **명령 내리고 관리만 함**.

**Node (Worker Node) - 일꾼 서버**

- 실제 파드(Pod, 컨테이너)가 실행되는 곳
- 나머지 서버들
- 한 마스터에 여러 노드들이 연결됨
- 자원 제공하는 역할
- 클러스터 전체 자원을 늘리고 싶다면 Node를 늘리면 됨

**Namespace**

- 쿠버네티스 object들을 독립된 공간으로 분리시켜주는 역할
- 다른 namespace에 있는 pod에는 연결 불가, Service도 연결 불가
- 한 Namespace에서는 같은 이름의 Pod를 생성할 수 없음

**Pod**

- 쿠버네티스 최소 배포단위
- Pod에는 여러 컨테이너들이 있음 (컨테이너 하나당 하나의 앱)
    - 함께 배포되고 함께 죽고 함께 사는 컨테이너들의 그룹 (프론트, 백, …)
- Pod에 문제가 생겨서 재생성 되면 그 안에 있던 데이터가 날라감
    - 이 문제를 해결하기 위해 Volume을 만들어서 Pod에 연결하면 데이터는 이곳에 별도로 저장 할 수 있음
- 쿠버네티스 클러스터에서 Pod의 IP로 접근 가능 - 완전 외부에서는 접근 불가능

**Service**

- Pod들에게 외부로부터 연결이 가능하도록 IP를 할당 , 로드밸런싱 등
- Service의 IP로 접근하면 항상 연결되어있는 Pod에 접근 가능
    - Pod의 IP는 Pod가 재생성되면 바뀜 → Pod의 IP는 신뢰성이 떨어짐
    - Service의 IP는 사용자가 지우지 않는한, 삭제나 재생성되지 않음
- Pod에는 labels을, Sevice에는 selector를 동일하게 지정해서 연결함

**ResourceQuota / LimitRange**

- 한 Namepsace에서 사용할 수 있는 자원의 양을 제한시킬 수 있음 (Pod개수 제한, cpu/mem제한 등)

**ConfigMap / Secret**

- Pod 생성 시에 컨테이너 안에 환경변수 값을 넣어주거나 파일을 마운팅 시켜줄 수 있음 (세팅)
    - ConfigMap - 환경 설정 등
    - Secret - 비밀번호/토큰 같은 민감한 정보

**Controller**

- Pod 관리
- Pod를 만들어주고, Pod가 죽었을 때 다시 생성해줌